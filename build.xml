<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project name="GeoResults" default="dist" basedir=".">
	<property name="lib-test" location="lib"/>
	<property name="src-test" location="src/test/java"/>
	<property name="build-test" location="target/ant-build-test"/>
	<property name="test-result" location="target/ant-test"/>
	<property name="src-javax" location="src/javax/java"/>
	<property name="res-javax" location="src/javax/resources"/>
	<property name="lib-javax" location="lib"/>
	<property name="build-javax" location="target/ant-build-javax"/>
	<property name="dist-javax" location="target/ant-dist"/>
	<property name="doc-javax" location="target/ant-doc-javax"/>
	
	<path id="build-javax-classpath">
	    <fileset dir="${lib-javax}">
	        <include name="*.jar"/>
	    </fileset>
	</path>
	
	<path id="build-classpath">
		<fileset dir="${lib-test}">
			<include name="*.jar"/>
		</fileset>
	</path>
	
	<path id="test-classpath">
		<fileset dir="${lib-test}">
			<include name="*.jar"/>
		</fileset>
		<pathelement path="${build-test}"/>
	</path>
	
	<target name="compile-tests">
		<mkdir dir="${build-test}"/>
		<javac srcdir="${src-test}" destdir="${build-test}" classpathref="build-classpath" encoding="UTF-8" includeantruntime="false"/>
	</target>
	
	<target name="test" depends="compile-tests">
		<mkdir dir="${test-result}"/>
		<junit haltonfailure="true">
			<classpath refid="test-classpath"/>
			<formatter type="xml"/>
			<batchtest todir="${test-result}">
				<fileset dir="${src-test}" includes="**/*.java"/>
			</batchtest>
		</junit>
	</target>

	<target name="init-javax">
		<mkdir dir="${build-javax}"/>
		<mkdir dir="${dist-javax}"/>
	</target>

	<target name="compile-javax" depends="init-javax">
		<javac srcdir="${src-javax}" destdir="${build-javax}" classpathref="build-javax-classpath" encoding="UTF-8" includeantruntime="false"/>
		<copy todir="${build-javax}">
		    <fileset dir="${src-javax}" excludes="**/*.java"/>
		</copy>
	</target>

	<target name="dist-javax" depends="compile-javax">
		<jar jarfile="${dist-javax}/scs-javax.jar" basedir="${build-javax}">
			<fileset dir="${res-javax}">
				<include name="META-INF/**"/>
			</fileset>
		</jar>
	</target>
	
	<target name="doc-javax" depends="init-javax">
		<javadoc sourcepath="${src-javax}" destdir="${doc-javax}" classpathref="build-javax-classpath"/>
		<jar jarfile="${dist-javax}/scs-javax-doc.jar" basedir="${doc-javax}"/>
	</target>

	<target name="init" depends="init-javax">
		<ant dir="GeoResults" target="init"/>
		<ant dir="GeoChampionship" target="init"/>
	</target>

	<target name="compile" depends="compile-javax">
		<ant dir="GeoResults" target="compile"/>
		<ant dir="GeoChampionship" target="compile"/>
	</target>

	<target name="dist" depends="dist-javax">
		<ant dir="GeoResults" target="dist"/>
		<ant dir="GeoChampionship" target="dist"/>
	</target>

	<target name="clean">
		<delete dir="${build-test}"/>
		<delete dir="${build-javax}"/>
		<delete dir="${dist-javax}"/>
		<delete dir="${doc-javax}"/>
		<delete dir="${test-result}"/>
		<ant dir="GeoResults" target="clean"/>
		<ant dir="GeoChampionship" target="clean"/>
	</target>	

</project>
